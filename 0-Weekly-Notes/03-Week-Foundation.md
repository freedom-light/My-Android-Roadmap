# 三.第三周内容

## 1.学会在本地存储数据（SharedPreferences、Room）
### 1.1.Room
#### 1.1.1.Room数据库
Room 持久性库在 SQLite 上提供了一个抽象层，以便在充分利用 SQLite 的强大功能的同时，能够流畅地访问数据库。具体来说，Room 具有以下优势：
| 特性 | 传统方式 | Room |
| :--- | :--- | :--- |
| **编译时验证** | SQL语句作为普通字符串，编译时无法发现错误，只能在运行时暴露。 | 在编译时分析SQL查询的语法和语义，提前发现表名、列名等错误。 |
| **开发效率与样板代码** | 需要编写大量重复、易出错的样板代码（如解析Cursor、构建ContentValues）。 | 通过注解（如`@Dao`, `@Query`, `@Insert`）自动生成实现代码，极大减少样板代码。 |
| **数据库迁移** | 需要手动处理`onUpgrade`逻辑，编写复杂的SQL并维护版本变化，容易出错。 | 提供清晰的`Migration`类，可安全地指定从某个版本到另一个版本的迁移路径，结构清晰且易于测试。 |

| 注解 | 作用 |
| :--- | :--- |
| `@Entity` | 标记一个类为数据库中的一张表。这是定义数据实体最重要的注解。 |
| `@PrimaryKey` | 定义表的主键。每个被 `@Entity` 注解的类至少必须有一个被此注解标记的字段。 |
| `@ColumnInfo` | 自定义表中列的属性，如列名（`name`）、是否索引（`index`）等。 |
| `@Ignore` | 忽略被标记的字段，不会在数据库表中为其创建对应的列。 |
| `@ForeignKey` | 定义外键约束，用于关联另一张表，保证引用的完整性。 |
| `@Index` | 为表的特定列创建索引，以提高查询速度，但可能会降低插入和更新数据的速度。 |
